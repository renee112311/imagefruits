(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["author"],{9411:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"author"}},[a("b-container",[a("div",{staticClass:"up"},[a("div",{attrs:{id:"avatar"}},[0!==t.avatar.length?a("img",{attrs:{src:this.avatar[0].src}}):t._e()]),a("h4",[t._v(t._s(this.author))])]),a("div",[a("b-tabs",[a("b-tab",{staticClass:"allimages",attrs:{title:"所有圖片",active:""}},[0===this.images.length?a("p",[t._v("沒有圖片唷！")]):a("b-row",{directives:[{name:"masonry",rawName:"v-masonry"}],attrs:{"transition-duration":"0.3s","item-selector":".item"}},t._l(t.images,(function(i,e){return a("b-col",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:e,staticClass:"item",attrs:{col:"",cols:"12",lg:"3"}},[a("b-card",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-img-public",modifiers:{"modal-img-public":!0}}],on:{click:function(i){return t.showModal(e)}}},[a("b-card-img",{attrs:{src:i.src}}),a("b-card-title",[t._v(t._s(i.title))])],1)],1)})),1)],1),a("b-tab",{staticClass:"albums",attrs:{title:"相簿"}},[0===t.albums.length?a("p",[t._v("沒有任何相簿")]):a("b-row",t._l(t.albums,(function(i,e){return a("b-col",{key:e,attrs:{col:"",cols:"12",md:"6",lg:"2"}},[a("b-card",{on:{click:function(i){return t.toMyalbum(e)}}},[a("b-card-img",{attrs:{src:t.albumCover[e].src}}),a("b-card-title",{staticStyle:{color:"white","text-shadow":"0 0 4px #333"}},[t._v(t._s(i.title))])],1)],1)})),1)],1),a("b-tab",{staticClass:"aboutme",attrs:{title:"關於我"}},[a("p",[t._v(t._s(this.description))]),a("span",[t._v("電話: 0900-000-000")]),a("br"),a("span",[t._v("信箱: abc12345@gmail.com")]),a("br"),a("span",[t._v("地址: 臺北市00區00路00巷00號")]),a("br"),a("a",{attrs:{href:"#"}},[a("font-awesome-icon",{staticStyle:{margin:"30px 10px 20px 10px","font-size":"30px"},attrs:{icon:["fab","facebook-square"]}})],1),a("a",{attrs:{href:"#"}},[a("font-awesome-icon",{staticStyle:{margin:"30px 10px 20px 10px","font-size":"30px"},attrs:{icon:["fab","twitter-square"]}})],1)])],1)],1)]),0!==t.images.length&&t.showModalTF?a("b-modal",{attrs:{id:"modal-img-public",size:"xl","hide-footer":"","hide-header":""}},[a("b-btn",{attrs:{id:"goFront",variant:"light"},on:{click:function(i){return t.showModal(t.index-1)}}},[t._v("<<")]),a("b-btn",{attrs:{id:"goForw",variant:"light"},on:{click:function(i){return t.showModal(t.index+1)}}},[t._v(">>")]),a("div",{staticClass:"inner"},[a("b-row",[a("b-col",{attrs:{col:"",cols:"12",md:"9"}},[a("div",{staticClass:"cardimg"},[a("b-card-img",{attrs:{src:t.images[t.index].src}})],1),a("b-card-body")],1),a("b-col",{attrs:{col:"",cols:"12",md:"3"}},[a("b-card-title",[t._v(t._s(t.images[t.index].title))]),a("b-card-text",[t._v(t._s(t.images[t.index].description))]),t.images[t.index].liked?a("span",{staticClass:"heart",on:{click:t.unfavorite}},[a("font-awesome-icon",{attrs:{icon:["fas","heart"]}})],1):a("span",{staticClass:"heart",on:{click:t.favorite}},[a("font-awesome-icon",{attrs:{icon:["far","heart"]}})],1),a("div",[a("span",{staticStyle:{color:"#777"}},[t._v("BY")]),a("div",{staticClass:"round",staticStyle:{"margin-bottom":"10px"}},[0!==t.avatar.length?a("img",{attrs:{src:t.avatar[0].src}}):t._e()]),a("a",{staticStyle:{color:"#777"}},[t._v(t._s(t.images[t.index].user))])]),a("div",[a("p",{staticStyle:{"padding-left":"10px"}},[t._v("分享至：")]),a("font-awesome-icon",{staticStyle:{margin:"0 10px 20px 10px","font-size":"30px"},attrs:{icon:["fab","facebook-square"]}}),a("font-awesome-icon",{staticStyle:{margin:"0 10px 20px 10px","font-size":"30px"},attrs:{icon:["fab","twitter-square"]}})],1)],1)],1)],1)],1):t._e()],1)},s=[],o=(a("a4d3"),a("e01a"),a("4de4"),a("7db0"),a("c975"),a("d81d"),a("a434"),a("b0c0"),a("b85c")),r={data:function(){return{images:[],albums:[],albumCover:null,index:"0",albumindex:"0",description:"",avatar:[],userid:"",myfavorites:[],showModalTF:!1}},methods:{showModal:function(t){this.showModalTF=!0,t<0?this.index=this.images.length-1:t===this.images.length?this.index=0:this.index=t},favorite:function(){var t=this;this.user?(this.myfavorites.push(this.images[this.index]._id),this.axios.patch("https://imagefruits.herokuapp.com/users/edit/"+this.userid,{account:this.user,favorite:this.myfavorites}).then((function(i){t.images[t.index].liked=!0,t.$swal({title:"收藏成功",icon:"success",confirmButtonText:"知道了"})})).catch((function(i){console.log(i),t.$swal({title:"收藏失敗",text:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))):this.$swal({title:"收藏失敗",text:"請先登入",icon:"warning",confirmButtonText:"知道了"})},unfavorite:function(){var t=this,i=this.myfavorites.indexOf(this.images[this.index]._id);this.myfavorites.splice(i,1),this.axios.patch("https://imagefruits.herokuapp.com/users/edit/"+this.userid,{account:this.user,favorite:this.myfavorites}).then((function(i){t.images[t.index].liked=!1})).catch((function(i){console.log(i),t.$swal({title:"取消失敗",text:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},likedOrnot:function(){var t,i=this,a=Object(o["a"])(this.myfavorites);try{var e=function(){var a=t.value;console.log(a);var e=-1;i.images.find((function(t,i){t._id===a&&(e=i)})),-1!==e&&void 0!==e&&(i.images[e].liked=!0)};for(a.s();!(t=a.n()).done;)e()}catch(s){a.e(s)}finally{a.f()}},toMyalbum:function(t){this.albumindex=t,this.$store.commit("album",this.albums[this.albumindex].title),this.$router.push("/authoralbum")}},computed:{user:function(){return this.$store.getters.user},author:function(){return this.$store.getters.author}},mounted:function(){var t=this;this.axios.get("https://imagefruits.herokuapp.com/avatar/"+this.author).then((function(i){t.avatar=i.data.result.map((function(t){return{src:"https://imagefruits.herokuapp.com/avatar/image/"+t.name}}))})).catch((function(i){console.log(i),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),this.axios.get("https://imagefruits.herokuapp.com/author/"+this.author).then((function(i){var a=i.data.result.filter((function(t){return"公開"===t.privacy}));t.images=a.map((function(t){return{title:t.title,description:t.description,src:"https://imagefruits.herokuapp.com/file/"+t.name,_id:t._id,user:t.user,liked:!1}})),setTimeout((function(){for(var a=function(a){var e=i.data.result.filter((function(i){return i.album===t.albums[a].title}));t.albumCover=e.map((function(t){return{src:"https://imagefruits.herokuapp.com/file/"+t.name}}))},e=0;e<t.albums.length;e++)a(e)}),300)})).catch((function(i){console.log(i),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),this.axios.get("https://imagefruits.herokuapp.com/albums/"+this.author).then((function(i){t.albums=i.data.result.map((function(t){return{title:t.title,description:t.description}}))})).catch((function(i){console.log(i),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),this.axios.get("https://imagefruits.herokuapp.com/users/"+this.author).then((function(i){var a=i.data.result[0];t.description=a.description})).catch((function(i){console.log(i),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),void 0!==this.user&&0!==this.user.length&&this.axios.get("https://imagefruits.herokuapp.com/users/"+this.user).then((function(i){var a=i.data.result[0];void 0===a||(t.userid=a._id,t.myfavorites=a.favorite)})).catch((function(i){console.log(i),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),setTimeout((function(){t.likedOrnot()}),100)},beforeRouteLeave:function(t,i,a){this.showModalTF=!1,a()}},n=r,c=a("2877"),l=Object(c["a"])(n,e,s,!1,null,null,null);i["default"]=l.exports}}]);
//# sourceMappingURL=author.ffc7764e.js.map
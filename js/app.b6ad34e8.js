(function(t){function e(e){for(var o,n,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);m&&m(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,n=1;n<a.length;n++){var r=a[n];0!==i[r]&&(o=!1)}o&&(s.splice(e--,1),t=c(c.s=a[0]))}return t}var o={},n={app:0},i={app:0},s=[];function r(t){return c.p+"js/"+({aboutus:"aboutus",author:"author",authoralbum:"authoralbum",back:"back",myalbum:"myalbum",myfav:"myfav",myimages:"myimages",myinfo:"myinfo",newalbum:"newalbum",upload:"upload",uploadSC:"uploadSC"}[t]||t)+"."+{aboutus:"f3c3b74f",author:"cad26597",authoralbum:"4732b584",back:"e963e392",myalbum:"d95c6ec1",myfav:"15ae922d",myimages:"f3d10774",myinfo:"20c3a810",newalbum:"8f0ae321",upload:"9b1c1ba2",uploadSC:"37b25e84"}[t]+".js"}function c(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={aboutus:1};n[t]?e.push(n[t]):0!==n[t]&&a[t]&&e.push(n[t]=new Promise((function(e,a){for(var o="css/"+({aboutus:"aboutus",author:"author",authoralbum:"authoralbum",back:"back",myalbum:"myalbum",myfav:"myfav",myimages:"myimages",myinfo:"myinfo",newalbum:"newalbum",upload:"upload",uploadSC:"uploadSC"}[t]||t)+"."+{aboutus:"3a3e4410",author:"31d6cfe0",authoralbum:"31d6cfe0",back:"31d6cfe0",myalbum:"31d6cfe0",myfav:"31d6cfe0",myimages:"31d6cfe0",myinfo:"31d6cfe0",newalbum:"31d6cfe0",upload:"31d6cfe0",uploadSC:"31d6cfe0"}[t]+".css",i=c.p+o,s=document.getElementsByTagName("link"),r=0;r<s.length;r++){var l=s[r],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===i))return e()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){l=d[r],u=l.getAttribute("data-href");if(u===o||u===i)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var o=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=o,delete n[t],m.parentNode.removeChild(m),a(s)},m.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){n[t]=0})));var o=i[t];if(0!==o)if(o)e.push(o[2]);else{var s=new Promise((function(e,a){o=i[t]=[e,a]}));e.push(o[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=r(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(m);var a=i[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",d.name="ChunkLoadError",d.type=o,d.request=n,a[1](d)}i[t]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=o,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(a,o,function(e){return t[e]}.bind(null,o));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var m=u;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1a3b":function(t,e,a){},"4fc1":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("0cdd");var o=a("2b0e"),n=a("bc3a"),i=a.n(n),s=a("a7fe"),r=a.n(s),c=a("4eb5"),l=a.n(c),u=a("f0eb"),d=a("a139"),m=a.n(d),f=a("5886"),h=a("49ec"),p=a.n(h),b=(a("4413"),a("5f5b"));a("ab8b"),a("2dd8");o["default"].use(b["b"]);a("df2d");var g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",{style:t.styleloading,attrs:{id:"loading"}},[t._m(0)]),o("div",{style:t.stylenav,attrs:{id:"nav"}},[o("b-navbar",{style:t.styleList,attrs:{toggleable:"lg",fixed:"top"}},[o("b-navbar-brand",{staticStyle:{width:"190px","padding-top":"0px","margin-bottom":"4px"},attrs:{to:"/"}},[o("img",{staticStyle:{width:"100%"},attrs:{src:a("67b8")}})]),o("b-navbar-nav",[o("b-nav-item",{attrs:{to:"/aboutus"}},[t._v("關於我們")])],1),0===t.user.length?o("b-navbar-toggle",{attrs:{target:"nav-collapse"}}):t._e(),0===t.user.length?o("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[o("b-navbar-nav",{staticClass:"ml-auto"},[o("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-login",modifiers:{"modal-login":!0}}],attrs:{right:""}},[o("font-awesome-icon",{attrs:{icon:["far","user"]}}),t._v("登入")],1),o("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-reg",modifiers:{"modal-reg":!0}}],attrs:{right:""}},[o("font-awesome-icon",{attrs:{icon:["fas","sign-in-alt"]}}),t._v("註冊")],1)],1)],1):t._e(),0!==t.user.length&&"admin"!==t.user?o("b-navbar-toggle",{attrs:{target:"nav-collapse2"}}):t._e(),0!==t.user.length&&"admin"!==t.user?o("b-collapse",{attrs:{id:"nav-collapse2","is-nav":""}},[o("b-navbar-nav",{staticClass:"ml-auto"},[o("b-nav-item",{staticClass:"d-block d-lg-none"},[t._v(t._s(this.user))]),o("b-nav-item",{staticClass:"d-block d-lg-none",attrs:{to:"/upload"}},[t._v("上傳圖片")]),o("b-nav-item",{staticClass:"d-block d-lg-none",attrs:{to:"/myimages"}},[t._v("我的圖片")]),o("b-nav-item",{staticClass:"d-block d-lg-none",attrs:{to:"/myfav"}},[t._v("我的收藏")]),o("b-nav-item",{staticClass:"d-block d-lg-none",attrs:{to:"/myinfo"}},[t._v("我的資料")]),o("b-nav-item",{staticClass:"d-block d-lg-none",on:{click:t.logout}},[t._v("登出")]),o("b-nav-item-dropdown",{staticClass:"d-none d-lg-block",attrs:{right:"",text:this.user}},[o("b-dropdown-item",{attrs:{to:"/upload"}},[t._v("上傳圖片")]),o("b-dropdown-item",{attrs:{to:"/myimages"}},[t._v("我的圖片")]),o("b-dropdown-item",{attrs:{to:"/myfav"}},[t._v("我的收藏")]),o("b-dropdown-item",{attrs:{to:"/myinfo"}},[t._v("我的資料")]),o("b-dropdown-item",{on:{click:t.logout}},[t._v("登出")])],1)],1)],1):t._e(),"admin"===t.user?o("b-navbar-toggle",{attrs:{target:"nav-collapse3"}}):t._e(),"admin"===t.user?o("b-collapse",{attrs:{id:"nav-collapse3","is-nav":""}},[o("b-navbar-nav",{staticClass:"ml-auto"},[o("b-nav-item",{staticClass:"d-block d-lg-none",attrs:{to:"/back"}},[t._v("後台管理")]),o("b-nav-item",{staticClass:"d-block d-lg-none",on:{click:t.logout}},[t._v("登出")]),o("b-nav-item-dropdown",{staticClass:"d-none d-lg-block",attrs:{right:"",text:this.user}},[o("b-dropdown-item",{attrs:{to:"/back"}},[t._v("後台管理")]),o("b-dropdown-item",{on:{click:t.logout}},[t._v("登出")])],1)],1)],1):t._e()],1),o("b-modal",{ref:"modal-login",attrs:{id:"modal-login",size:"xl","no-stacking":"","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[o("b-navbar",{attrs:{type:"light"}},[o("b-navbar-nav",[o("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-login",modifiers:{"modal-login":!0}}]},[o("font-awesome-icon",{attrs:{icon:["far","user"]}}),t._v("登入")],1),o("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-reg",modifiers:{"modal-reg":!0}}]},[o("font-awesome-icon",{attrs:{icon:["fas","sign-in-alt"]}}),t._v("註冊")],1)],1)],1)]},proxy:!0}])},[o("b-form",{on:{submit:t.submitLogin}},[o("b-form-group",{attrs:{label:"帳號","label-for":"input-account",description:"帳號為 5~10 字","invalid-feedback":"帳號格式不符",state:t.state("account")}},[o("b-form-input",{attrs:{id:"input-account",type:"text",state:t.state("account"),placeholder:"請輸入帳號"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),o("br"),o("b-form-group",{attrs:{label:"密碼","label-for":"input-password",description:"密碼至少 1 字","invalid-feedback":"密碼格式不符",state:t.state("password")}},[o("b-form-input",{attrs:{id:"input-password",type:"password",state:t.state("password"),placeholder:"請輸入密碼"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),o("b-button",{attrs:{id:"login",size:"lg",type:"submitLogin"}},[t._v("登入")]),o("b-button",{attrs:{size:"lg"},on:{click:function(e){return t.$bvModal.hide("modal-login")}}},[t._v("取消")])],1)],1),o("b-modal",{attrs:{id:"modal-reg",size:"xl","no-stacking":"","hide-footer":""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[o("b-navbar",{attrs:{type:"light"}},[o("b-navbar-nav",[o("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-login",modifiers:{"modal-login":!0}}]},[o("font-awesome-icon",{attrs:{icon:["far","user"]}}),t._v("登入")],1),o("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-reg",modifiers:{"modal-reg":!0}}]},[o("font-awesome-icon",{attrs:{icon:["fas","sign-in-alt"]}}),t._v("註冊")],1)],1)],1)]},proxy:!0}])},[o("b-form",{on:{submit:t.submitReg}},[o("b-form-group",{attrs:{label:"帳號","label-for":"input-account",description:"帳號為 5~10 字","invalid-feedback":"格式不符",state:t.state("account")}},[o("b-form-input",{attrs:{id:"input-account",type:"text",state:t.state("account"),placeholder:"請輸入帳號"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),o("br"),o("b-form-group",{attrs:{label:"密碼","label-for":"input-password",description:"密碼至少 1 字","invalid-feedback":"格式不符",state:t.state("password")}},[o("b-form-input",{attrs:{id:"input-password",type:"password",state:t.state("password"),placeholder:"請輸入密碼"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),o("br"),o("p",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-login",modifiers:{"modal-login":!0}}]},[t._v("已經有帳號了？點擊這裡登入。")]),o("b-button",{attrs:{size:"lg",type:"submitReg"}},[t._v("註冊")]),o("b-button",{attrs:{size:"lg"},on:{click:function(e){return t.$bvModal.hide("modal-reg")}}},[t._v("取消")])],1)],1),o("keep-alive",[o("vue-page-transition",{attrs:{name:"fade"}},[o("router-view")],1)],1)],1)])},v=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"loadinner"}},[o("img",{attrs:{src:a("9cd8")}}),o("h2",[t._v("loading...")])])}],w={name:"app",data:function(){return{account:"",password:"",styleList:{background:"rgba(255,255,255,0.5)",boxShadow:"none"},styleloading:{display:"table",opacity:"1",transition:"all 1.5s ease"},stylenav:{display:"none"}}},methods:{state:function(t){if("account"===t)return 0===this.account.length||!(this.account.length<5||this.account.length>10)},submitLogin:function(t){var e=this;t.preventDefault(),this.account.length<5||this.account.length>10?this.$swal({title:"無法登入",text:"帳號格式不符",icon:"error",confirmButtonText:"知道了"}):this.password.length<1&&this.$swal({title:"無法登入",text:"密碼格式不符",icon:"error",confirmButtonText:"知道了"}),this.axios.post("https://imagefruits.herokuapp.com/login",{account:this.account,password:this.password}).then((function(t){var a=t.data;a.success?(e.$swal({title:"登入成功",text:"歡迎回來",icon:"success",confirmButtonText:"知道了"}),e.$refs["modal-login"].hide(),e.$store.commit("login",e.account),"admin"===e.account?e.$router.push("/back"):location.reload()):e.$swal({title:"登入失敗",text:a.message,icon:"error",confirmButtonText:"知道了"})})).catch((function(t){e.$swal({title:"登入失敗",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})}))},submitReg:function(t){var e=this;t.preventDefault(),this.account.length<5||this.account.length>10?this.$swal({title:"無法註冊",text:"帳號格式不符",icon:"error",confirmButtonText:"知道了"}):this.password.length<1&&this.$swal({title:"無法註冊",text:"請輸入密碼",icon:"error",confirmButtonText:"知道了"}),this.axios.post("https://imagefruits.herokuapp.com/users",{account:this.account,password:this.password,description:"",favorite:[],banned:!1}).then((function(t){var a=t.data;a.success?e.$swal({title:"註冊成功",text:"恭喜您",icon:"success",confirmButtonText:"知道了"}):e.$swal({title:"註冊失敗",text:a.message,icon:"error",confirmButtonText:"知道了"})})).catch((function(t){e.$swal({title:"註冊失敗",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})}))},logout:function(){var t=this;this.axios.delete("https://imagefruits.herokuapp.com/logout").then((function(e){var a=e.data;a.success?(t.$store.commit("logout"),"/"!==t.$router.path&&t.$router.push("/")):t.$swal({title:"登出失敗",text:a.message,icon:"error",confirmButtonText:"知道了"})})).catch((function(e){t.$swal({title:"登出失敗",text:e.response.data.message,icon:"error",confirmButtonText:"知道了"})}))},heartbeat:function(){var t=this;this.axios.get("https://imagefruits.herokuapp.com/heartbeat").then((function(e){var a=e.data;t.user.length>0&&(a||(t.$swal({title:"發生錯誤",text:"登入時效已過期",icon:"warning",confirmButtonText:"知道了"}),t.$store.commit("logout"),"/"!==t.$router.path&&t.$router.push("/")))})).catch((function(){t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"}),t.$store.commit("logout"),"/"!==t.$router.path&&t.$router.push("/")}))},handleScroll:function(t){window.scrollY<=600?(this.styleList.background="rgba(255,255,255,0.5)",this.styleList.boxShadow="none"):(this.styleList.background="#fff",this.styleList.boxShadow="0 0 10px rgba(0,0,0,0.3)")}},computed:{user:function(){return this.$store.getters.user}},mounted:function(){var t=this;window.addEventListener("scroll",this.handleScroll),window.onload=function(){setTimeout((function(){t.styleloading.opacity=0,t.styleloading.display="none",t.styleloading.transition="all 1.5s ease",t.stylenav.display="block"}),1e3)},this.heartbeat(),setInterval((function(){t.heartbeat()}),5e3)},beforeDestroyed:function(){window.removeEventListener("scroll",this.handleScroll)},watch:{$route:function(t,e){"/"!==t.path?(this.styleList.background="#fff",window.removeEventListener("scroll",this.handleScroll)):window.addEventListener("scroll",this.handleScroll)}}},y=w,x=a("2877"),k=Object(x["a"])(y,g,v,!1,null,null,null),_=k.exports,$=(a("d3b7"),a("8c4f")),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("Homecarousel"),a("b-container",[a("h1",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v("盤子上有什麼？")]),a("Homewater"),a("go-top",{attrs:{size:60,bottom:50}})],1)],1)},C=[],S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"homecarousel"}},[a("b-carousel",{staticStyle:{"text-shadow":"0px 0px 2px #000"},attrs:{id:"carousel-fade",fade:"",interval:6e3,controls:""}},[a("b-carousel-slide",{attrs:{"img-src":t.carouselimg[0].src}}),a("b-carousel-slide",{attrs:{"img-src":t.carouselimg[1].src}}),a("b-carousel-slide",{attrs:{"img-src":t.carouselimg[2].src}}),a("b-carousel-slide",{attrs:{"img-src":t.carouselimg[3].src}})],1),a("textra",{attrs:{data:t.words,timer:5,infinite:!0,filter:"top-bottom"}})],1)},B=[],L=(a("d81d"),a("b0c0"),{data:function(){return{words:["最容易使用的圖床","最廣泛的交流平台","最舒適的展示空間","立即加入水果拼盤"],carouselimg:[]}},computed:{},mounted:function(){var t=this;this.axios.get("https://imagefruits.herokuapp.com/carousel/img").then((function(e){var a=e.data.result;t.carouselimg=a.map((function(t){return{src:"https://imagefruits.herokuapp.com/file/"+t.name,_id:t._id}}))})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))}}),O=L,E=Object(x["a"])(O,S,B,!1,null,null,null),N=E.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"homewater"}},[a("b-row",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"searchrow"},[a("b-col",{attrs:{col:"",cols:"12",xl:"3"}},[a("b-form-select",{staticClass:"form-control",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[a("option",[t._v("圖片標題")]),a("option",[t._v("作者帳號")])])],1),a("b-col",{attrs:{col:"",cols:"12",xl:"9"}},[a("b-nav-form",{attrs:{id:"searchBar"}},[a("b-form-input",{attrs:{type:"text",size:"sm",placeholder:"輸入關鍵字即可搜尋"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1)],1)],1),0===this.search.length&&"圖片標題"===this.searchType?a("p",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v("沒有標題包含「"+t._s(this.keywords)+"」的圖片唷！")]):t._e(),0===this.search.length&&"作者帳號"===this.searchType?a("p",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v("沒有作者帳號包含「"+t._s(this.keywords)+"」的圖片唷！")]):t._e(),0!==this.search.length?a("b-row",{directives:[{name:"masonry",rawName:"v-masonry"},{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{"transition-duration":"1s","item-selector":".item"}},t._l(t.search,(function(e,o){return a("b-col",{directives:[{name:"masonry-tile",rawName:"v-masonry-tile"}],key:o,staticClass:"item",attrs:{col:"",cols:"12",lg:"3"}},[a("b-card",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-img-public",modifiers:{"modal-img-public":!0}}],on:{click:function(e){return t.showModal(o)}}},[a("b-card-img",{attrs:{src:e.src}}),a("b-card-title",[t._v(t._s(e.title))])],1)],1)})),1):t._e(),0!==t.search.length&&t.showModalTF?a("b-modal",{attrs:{id:"modal-img-public",size:"xl","hide-footer":"","hide-header":""}},[a("b-btn",{attrs:{id:"goFront",variant:"light"},on:{click:function(e){return t.showModal(t.index-1)}}},[t._v("<<")]),a("b-btn",{attrs:{id:"goForw",variant:"light"},on:{click:function(e){return t.showModal(t.index+1)}}},[t._v(">>")]),a("div",{staticClass:"inner"},[a("b-row",[a("b-col",{attrs:{col:"",cols:"12",md:"9"}},[a("div",{staticClass:"cardimg"},[a("b-card-img",{attrs:{src:t.search[t.index].src}})],1),a("b-card-body")],1),a("b-col",{attrs:{col:"",cols:"12",md:"3"}},[a("b-card-title",[t._v(t._s(t.search[t.index].title))]),a("b-card-text",[t._v(t._s(t.search[t.index].description))]),t.search[t.index].liked?a("span",{staticClass:"heart",on:{click:t.unfavorite}},[a("font-awesome-icon",{attrs:{icon:["fas","heart"]}}),a("span",{staticClass:"position-absolute",staticStyle:{bottom:"-70%",left:"0","font-size":"18px"}},[t._v("點擊取消")])],1):a("span",{staticClass:"heart position-relative",on:{click:t.favorite}},[a("font-awesome-icon",{attrs:{icon:["far","heart"]}}),a("span",{staticClass:"position-absolute",staticStyle:{bottom:"-70%",left:"0","font-size":"18px"}},[t._v("點擊收藏")])],1),a("div",[a("span",{staticStyle:{color:"#777"}},[t._v("BY")]),a("div",{staticClass:"round",staticStyle:{"margin-bottom":"10px"},on:{click:t.toAuthor}},[0!==t.avatar.length?a("img",{attrs:{src:t.avatar[0].src}}):t._e()]),a("a",{staticStyle:{color:"#777"},on:{click:t.toAuthor}},[t._v(t._s(t.search[t.index].user))])]),a("div",[a("p",{staticStyle:{"padding-left":"10px"}},[t._v("分享至：")]),a("font-awesome-icon",{staticStyle:{margin:"0 10px 20px 10px","font-size":"30px"},attrs:{icon:["fab","facebook-square"]}}),a("font-awesome-icon",{staticStyle:{margin:"0 10px 20px 10px","font-size":"30px"},attrs:{icon:["fab","twitter-square"]}})],1)],1)],1)],1)],1):t._e()],1)},j=[],z=(a("a4d3"),a("e01a"),a("4de4"),a("7db0"),a("c975"),a("a434"),a("4d63"),a("ac1f"),a("25f0"),a("841c"),a("b85c")),A={data:function(){return{images:[],index:"0",keywords:"",userid:"",myfavorites:[],avatar:[{src:"000"}],searchType:"圖片標題",showModalTF:!1}},methods:{showModal:function(t){var e=this;this.showModalTF=!0,t<0?this.index=this.images.length-1:t===this.images.length?this.index=0:this.index=t,this.$store.commit("author",this.search[this.index].user),this.axios.get("https://imagefruits.herokuapp.com/avatar/"+this.author).then((function(t){e.avatar=t.data.result.map((function(t){return{src:"https://imagefruits.herokuapp.com/avatar/image/"+t.name}}))})).catch((function(t){console.log(t),e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},toAuthor:function(){this.showModalTF=!1,this.$store.commit("author",this.images[this.index].user),this.$router.push("/author")},favorite:function(){var t=this;this.user?(this.myfavorites.push(this.search[this.index]._id),this.axios.patch("https://imagefruits.herokuapp.com/users/edit/"+this.userid,{favorite:this.myfavorites}).then((function(e){t.search[t.index].liked=!0;var a,o=Object(z["a"])(t.myfavorites);try{var n=function(){var e=a.value,o=-1;t.search.find((function(t,a){t._id===e&&(o=a)})),console.log(o),t.search[o].liked=!0};for(o.s();!(a=o.n()).done;)n()}catch(i){o.e(i)}finally{o.f()}t.$swal({title:"收藏成功",icon:"success",confirmButtonText:"知道了"})})).catch((function(e){console.log(e),t.$swal({title:"收藏失敗",text:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))):this.$swal({title:"收藏失敗",text:"請先登入",icon:"warning",confirmButtonText:"知道了"})},unfavorite:function(){var t=this,e=this.myfavorites.indexOf(this.search[this.index]._id);this.myfavorites.splice(e,1),this.axios.patch("https://imagefruits.herokuapp.com/users/edit/"+this.userid,{favorite:this.myfavorites}).then((function(e){t.search[t.index].liked=!1})).catch((function(e){console.log(e),t.$swal({title:"取消失敗",text:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},likedOrnot:function(){var t,e=Object(z["a"])(this.myfavorites);try{for(e.s();!(t=e.n()).done;){var a=t.value,o=-1;this.search.find((function(t,e){t._id===a&&(o=e)})),this.search[o].liked=!0}}catch(n){e.e(n)}finally{e.f()}}},computed:{user:function(){return this.$store.getters.user},author:function(){return this.$store.getters.author},search:function(){if(""!==this.keywords){this.keywords.toLowerCase();var t=new RegExp(this.keywords);return"圖片標題"===this.searchType?this.images.filter((function(e){return t.test(e.title.toLowerCase())})):"作者帳號"===this.searchType?this.images.filter((function(e){return t.test(e.user.toLowerCase())})):this.images}return this.images}},mounted:function(){var t=this;this.axios.get("https://imagefruits.herokuapp.com/").then((function(e){var a=e.data.result.filter((function(t){return"公開"===t.privacy}));t.images=a.map((function(t){return{title:t.title,description:t.description,src:"https://imagefruits.herokuapp.com/file/"+t.name,_id:t._id,user:t.user,liked:!1}}))})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),void 0!==this.user&&0!==this.user.length&&this.axios.get("https://imagefruits.herokuapp.com/users/"+this.user).then((function(e){var a=e.data.result[0];void 0===a||(t.userid=a._id,t.myfavorites=a.favorite)})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),setTimeout((function(){t.likedOrnot()}),100)},beforeRouteLeave:function(t,e,a){this.showModalTF=!1,a()}},P=A,U=(a("ccd1"),Object(x["a"])(P,M,j,!1,null,null,null)),F=U.exports,H={name:"Home",components:{Homecarousel:N,Homewater:F,GoTop:p.a},computed:{user:function(){return this.$store.getters.user}}},D=H,R=(a("c219"),Object(x["a"])(D,T,C,!1,null,null,null)),q=R.exports,I=a("2f62"),G=a("0e44");o["default"].use(I["a"]);var J=new I["a"].Store({state:{user:"",author:"",album:"",successUp:null,carouselimg:[]},mutations:{login:function(t,e){t.user=e},logout:function(t){t.user=""},successClean:function(t){t.successUp=null},successUp:function(t,e){t.successUp=e},author:function(t,e){t.author=e},album:function(t,e){t.album=e},carouselimg:function(t,e){t.carouselimg=e}},getters:{user:function(t){return t.user},successUp:function(t){return t.successUp},author:function(t){return t.author},album:function(t){return t.album},carouselimg:function(t){return t.carouselimg}},actions:{},modules:{},plugins:[Object(G["a"])()]});o["default"].use($["a"]);var Y=[{path:"/",name:"Home",component:q,meta:{login:!1,title:"imagefruits"}},{path:"/upload",name:"Upload",component:function(){return a.e("upload").then(a.bind(null,"2679"))},meta:{login:!0,title:"imagefruits | 上傳圖片"}},{path:"/uploadSC",name:"UploadSC",component:function(){return a.e("uploadSC").then(a.bind(null,"e459"))},meta:{login:!0,title:"imagefruits | 上傳成功"}},{path:"/myimages",name:"Myimages",component:function(){return a.e("myimages").then(a.bind(null,"c7c3"))},meta:{login:!0,title:"imagefruits | 我的圖片"}},{path:"/myfav",name:"Myfav",component:function(){return a.e("myfav").then(a.bind(null,"379c"))},meta:{login:!0,title:"imagefruits | 我的收藏"}},{path:"/myinfo",name:"Myinfo",component:function(){return a.e("myinfo").then(a.bind(null,"16ec"))},meta:{login:!0,title:"imagefruits | 我的資料"}},{path:"/myalbum",name:"Myalbum",component:function(){return a.e("myalbum").then(a.bind(null,"91ea"))},meta:{login:!0,title:"imagefruits | 相簿"}},{path:"/aboutus",name:"Aboutus",component:function(){return a.e("aboutus").then(a.bind(null,"4047"))},meta:{login:!1,title:"imagefruits | 關於我們"}},{path:"/author",name:"Author",component:function(){return a.e("author").then(a.bind(null,"9411"))},meta:{login:!1,title:"imagefruits | 作者頁面"}},{path:"/authoralbum",name:"Authoralbum",component:function(){return a.e("authoralbum").then(a.bind(null,"5277"))},meta:{login:!1,title:"imagefruits | 相簿"}},{path:"/newalbum",name:"Newalbum",component:function(){return a.e("newalbum").then(a.bind(null,"0282"))},meta:{login:!0,title:"imagefruits | 新增相簿"}},{path:"/back",name:"Back",component:function(){return a.e("back").then(a.bind(null,"d8ee"))},meta:{login:!0,title:"imagefruits | 管理員後台"}}],K=new $["a"]({routes:Y});K.beforeEach((function(t,e,a){document.title=t.meta.title,t.meta.login&&!J.state.user?a("/"):a()}));var Q=K,V=(a("4160"),a("159b"),new IntersectionObserver((function(t,e){t.forEach((function(t){t.isIntersecting&&(t.target.classList.add("enter"),e.unobserve(t.target))}))}))),W={bind:function(t){t.classList.add("before-enter"),V.observe(t)}},X=a("3f9b"),Z=a("ecee"),tt=a("ad3d"),et=a("b702"),at=a("c074"),ot=a("f2d1");Z["c"].add(et["c"],et["a"],et["b"],at["a"],ot["a"],ot["b"],at["b"],et["d"]),i.a.defaults.withCredentials=!0,o["default"].use(b["a"]),o["default"].use(r.a,i.a),o["default"].use(X["a"]),o["default"].use(l.a),o["default"].use(u["default"]),o["default"].use(m.a),o["default"].use(f["a"]),o["default"].use(p.a),o["default"].component("font-awesome-icon",tt["a"]),o["default"].directive("scrollanimation",W),l.a.config.autoSetContainer=!0,o["default"].config.productionTip=!1,new o["default"]({router:Q,store:J,render:function(t){return t(_)}}).$mount("#app")},"67b8":function(t,e,a){t.exports=a.p+"img/LOGO.3e66b3e0.svg"},"9cd8":function(t,e,a){t.exports=a.p+"img/LOGO2.502e6679.svg"},c219:function(t,e,a){"use strict";var o=a("4fc1"),n=a.n(o);n.a},ccd1:function(t,e,a){"use strict";var o=a("1a3b"),n=a.n(o);n.a},df2d:function(t,e,a){}});
//# sourceMappingURL=app.b6ad34e8.js.map
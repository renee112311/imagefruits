(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myimages"],{"2e63":function(t,e,i){t.exports=i.p+"img/berry.0a1c3572.png"},c740:function(t,e,i){"use strict";var s=i("23e7"),a=i("b727").findIndex,n=i("44d2"),o=i("ae40"),r="findIndex",c=!0,l=o(r);r in[]&&Array(1)[r]((function(){c=!1})),s({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n(r)},c7c3:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"myimages"}},[s("b-container",[s("h3",[t._v("我的圖片")]),s("b-card",{attrs:{"no-body":""}},[s("b-tabs",[s("b-tab",{attrs:{id:"allimages",title:"所有圖片",active:""}},[this.select?s("div",{staticClass:"inner"},[s("b-btn",{on:{click:t.multidelete}},[t._v("一併刪除")]),s("b-btn",{on:{click:t.selectCancel}},[t._v("取消選取")]),0===t.images.length?s("p",[t._v("沒有任何圖片，快去上傳吧")]):s("b-row",t._l(t.images,(function(e,a){return s("b-col",{key:a,attrs:{col:"",cols:"12",lg:"2"}},[s("b-card",{on:{click:function(e){return t.multiselect(a)}}},[e.checked?s("img",{staticClass:"berry",attrs:{src:i("2e63")}}):t._e(),s("b-card-img",{attrs:{src:e.src}})],1)],1)})),1)],1):s("div",{staticClass:"inner"},[s("b-btn",{on:{click:t.selectOpen}},[t._v("選取")]),0===t.images.length?s("p",[t._v("沒有任何圖片，快去上傳吧")]):s("b-row",{staticClass:"notinselect"},t._l(t.images,(function(e,i){return s("b-col",{key:i,attrs:{col:"",cols:"12",lg:"2"}},[s("b-card",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-img",modifiers:{"modal-img":!0}}],on:{click:function(e){return t.showModal(i)}}},[s("b-card-img",{attrs:{src:e.src}}),s("b-card-title",{staticStyle:{color:"white","text-shadow":"0 0 4px #333"}},[t._v(t._s(e.title))])],1)],1)})),1)],1)]),s("b-tab",{attrs:{title:"所有相簿"}},[s("div",{staticClass:"inner"},[s("b-btn",{on:{click:t.toNewalbum}},[t._v("新增相簿")]),0===t.albums.length?s("p",[t._v("沒有任何相簿唷")]):s("b-row",{staticClass:"allalbums"},t._l(t.albums,(function(e,i){return s("b-col",{key:i,attrs:{col:"",cols:"12",md:"6",lg:"2"}},[s("b-card",{on:{click:function(e){return t.toMyalbum(i)}}},[s("b-card-img",{attrs:{src:t.albumCover[i]}}),s("b-card-title",{staticStyle:{color:"white","text-shadow":"0 0 4px #333"}},[t._v(t._s(e.title))])],1)],1)})),1)],1)])],1)],1),s("div",{staticClass:"mask"}),0!==t.images.length&&t.showModalTF?s("b-modal",{attrs:{id:"modal-img",size:"xl","hide-footer":"","hide-header":""}},[s("b-btn",{attrs:{id:"goFront",variant:"light"},on:{click:function(e){return t.showModal(t.index-1)}}},[t._v("<<")]),s("b-btn",{attrs:{id:"goForw",variant:"light"},on:{click:function(e){return t.showModal(t.index+1)}}},[t._v(">>")]),s("div",{staticClass:"inner"},[s("b-button",{staticClass:"d-block d-sm-none",attrs:{size:"sm"},on:{click:function(e){return t.$bvModal.hide("modal-img")}}},[t._v("X")]),s("b-row",[s("b-col",{staticClass:"w-100",staticStyle:{"text-align":"center"}},[s("b-card-img",{attrs:{src:t.images[t.index].src}})],1),s("div",{staticClass:"w-100",staticStyle:{height:"1px"}}),s("b-col",[s("b-card-body",[s("table",[s("tr",[s("td",[t.images[t.index].edit?s("b-form-select",{attrs:{options:t.privacyOp},model:{value:t.images[t.index].model_privacy,callback:function(e){t.$set(t.images[t.index],"model_privacy",e)},expression:"images[index].model_privacy"}}):s("span",{staticStyle:{color:"#888"},on:{click:function(e){return t.edit(t.index)}}},[t._v("("+t._s(t.images[t.index].privacy)+")")])],1),s("td")]),s("tr",[s("td",[t.images[t.index].edit?s("b-form-input",{on:{blur:function(e){return t.update(t.index)}},model:{value:t.images[t.index].model_titl,callback:function(e){t.$set(t.images[t.index],"model_titl",e)},expression:"images[index].model_titl"}}):s("span",{staticStyle:{"font-size":"30px"},attrs:{id:"imgtitle"},on:{click:function(e){return t.edit(t.index)}}},[t._v(t._s(t.images[t.index].title))])],1),s("td")]),s("tr",[s("td",[t.images[t.index].edit?s("b-form-textarea",{on:{blur:function(e){return t.update(t.index)}},model:{value:t.images[t.index].model_des,callback:function(e){t.$set(t.images[t.index],"model_des",e)},expression:"images[index].model_des"}}):s("span",{attrs:{id:"imgdesc"},on:{click:function(e){return t.edit(t.index)}}},[t._v(t._s(t.images[t.index].description))])],1),s("td")]),s("tr",[s("td",[t.images[t.index].edit?t._e():s("b-btn",{attrs:{variant:"light"},on:{click:function(e){return t.edit(t.index)}}},[s("font-awesome-icon",{attrs:{icon:["far","edit"]}})],1)],1),s("td",[s("b-btn",{attrs:{variant:"light"},on:{click:function(e){return t.del(t.index)}}},[s("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)],1)])])])],1),s("b-col",[s("b-card-footer",[s("table",[s("tr",[s("td",[s("span",[t._v("圖片連結")])]),s("td")]),s("tr",[s("td",{staticClass:"d-none d-xl-table-cell",attrs:{width:"50%"}},[s("span",[t._v(t._s(t.images[t.index].src))])]),s("td",[s("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.images[t.index].src,expression:"images[index].src",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{type:"button"}},[t._v("複製")])],1)]),s("tr",[s("td",[s("span",[t._v("HTML")])]),s("td")]),s("tr",[s("td",{staticClass:"d-none d-xl-table-cell",attrs:{width:"50%"}},[s("span",[t._v('<img src="'+t._s(t.images[t.index].src)+'">')])]),s("td",[s("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:"<img src="+t.images[t.index].src+">",expression:"'<img src='+images[index].src+'>'",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{type:"button"}},[t._v("複製")])],1)]),s("tr",[s("td",[s("span",[t._v("Markdown")])]),s("td")]),s("tr",[s("td",{staticClass:"d-none d-xl-table-cell",attrs:{width:"50%"}},[s("span",[t._v("![]("+t._s(t.images[t.index].src)+")")])]),s("td",[s("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:"![]("+t.images[t.index].src+")",expression:"'![]('+images[index].src+')'",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{type:"button"}},[t._v("複製")])],1)])])])],1)],1)],1)],1):t._e()],1)],1)},a=[],n=(i("a4d3"),i("e01a"),i("7db0"),i("c740"),i("c975"),i("d81d"),i("a434"),i("b0c0"),i("b85c")),o={data:function(){return{description:"",images:[],albums:[],albumCover:[],index:"0",select:!1,options:[],privacyOp:["公開","私人"],showModalTF:!1}},methods:{showModal:function(t){this.showModalTF=!0,t<0?this.index=this.images.length-1:t===this.images.length?this.index=0:this.index=t},validateText:function(){this.description.length>150?this.textstate=!1:this.textstate=!0},edit:function(t){this.images[t].edit=!0,this.images[t].model_titl=this.images[t].title,this.images[t].model_des=this.images[t].description},update:function(t){var e=this;this.axios.patch("https://imagefruits.herokuapp.com/file/"+this.images[t]._id,{title:this.images[t].model_titl,description:this.images[t].model_des,privacy:this.images[t].model_privacy}).then((function(i){e.images[t].edit=!1,e.images[t].title=e.images[t].model_titl,e.images[t].description=e.images[t].model_des,e.images[t].privacy=e.images[t].model_privacy})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},del:function(t){var e=this;this.axios.delete("https://imagefruits.herokuapp.com/file/"+this.images[t]._id).then((function(i){e.images.splice(t,1)})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},multidelete:function(){var t,e=this,i=Object(n["a"])(this.options);try{for(i.s();!(t=i.n()).done;){var s=t.value;this.axios.delete("https://imagefruits.herokuapp.com/file/"+s._id).then((function(t){var i=e.images.findIndex((function(t){return t._id===s._id}));e.images.splice(i,1),e.options=null})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))}}catch(a){i.e(a)}finally{i.f()}},onCopy:function(t){this.$swal({title:"已複製到剪貼簿",icon:"success",confirmButtonText:"知道了"})},onError:function(t){this.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})},selectOpen:function(){this.select=!0},selectCancel:function(){this.select=!1,this.options.length=0;var t,e=Object(n["a"])(this.images);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.checked=!1}}catch(s){e.e(s)}finally{e.f()}},multiselect:function(t){this.images[t].checked?(this.options.splice(this.options.indexOf(this.images[t]),1),this.images[t].checked=!1):(this.options.push(this.images[t]),this.images[t].checked=!0)},toNewalbum:function(){this.$router.push("/Newalbum")},toMyalbum:function(t){this.index=t,this.$store.commit("album",this.albums[this.index].title),this.$router.push("/myalbum")}},computed:{user:function(){return this.$store.getters.user}},mounted:function(){var t=this;this.axios.get("https://imagefruits.herokuapp.com/albums/"+this.user).then((function(e){t.albums=e.data.result.map((function(t){return{title:t.title,description:t.description}}))})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),this.axios.get("https://imagefruits.herokuapp.com/author/"+this.user).then((function(e){t.images=e.data.result.map((function(t){return{title:t.title,description:t.description,privacy:t.privacy,src:"https://imagefruits.herokuapp.com/file/"+t.name,_id:t._id,checked:!1,edit:!1,model_titl:t.title,model_des:t.description,model_privacy:t.privacy,album:t.album}}));var i,s=Object(n["a"])(t.albums);try{var a=function(){o=i.value;var e=[];t.images.find((function(t,i){t.album===o.title&&e.push(i)})),console.log(t.images[e[0]].src),t.albumCover.push(t.images[e[0]].src)};for(s.s();!(i=s.n()).done;){var o;a()}}catch(r){s.e(r)}finally{s.f()}})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},beforeRouteLeave:function(t,e,i){this.showModalTF=!1,i()}},r=o,c=i("2877"),l=Object(c["a"])(r,s,a,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=myimages.2fc5d44a.js.map
{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./src/views/Upload.vue?afd0","webpack:///src/views/Upload.vue","webpack:///./src/views/Upload.vue?2d03","webpack:///./src/views/Upload.vue","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/modules/es.array.includes.js"],"names":["$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","this","indexOf","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","attrs","_v","on","submit","state","validateFile","model","value","callback","$$v","files","expression","staticClass","style","staticRenderFns","name","data","images","banned","spinnerstyle","display","computed","user","$store","getters","imagesL","localstorage","successUp","methods","event","preventDefault","$swal","title","text","icon","confirmButtonText","axios","post","headers","mounted","get","setTimeout","component","isRegExp","module","exports","it","TypeError","wellKnownSymbol","MATCH","METHOD_NAME","regexp","e","f","$includes","addToUnscopables","arrayMethodUsesToLength","USES_TO_LENGTH","ACCESSORS","1","el"],"mappings":"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","file":"js/upload.03227c95.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"upload\"}},[_c('b-container',[_c('h3',[_vm._v(\"上傳檔案\")]),_c('b-form',{on:{\"submit\":_vm.submit}},[_c('b-form-file',{attrs:{\"multiple\":\"\",\"state\":_vm.state,\"placeholder\":\"瀏覽檔案或是拖曳至此\",\"drop-placeholder\":\"將檔案拖曳至此\",\"browse-text\":\"瀏覽\",\"accept\":\"image/*\"},on:{\"input\":_vm.validateFile},model:{value:(_vm.files),callback:function ($$v) {_vm.files=$$v},expression:\"files\"}}),_c('p',[_vm._v(\"一張上限4MB\")]),_c('p',[_vm._v(\"本次最多能上傳5張\")]),_c('p',[_vm._v(\"PNG、JPEG、JPG、GIF、BMP\")]),_c('b-button',{attrs:{\"size\":\"lg\",\"type\":\"submit\"}},[_vm._v(\"上傳\")]),_c('br'),_c('b-spinner',{staticClass:\"text-center\",style:(_vm.spinnerstyle),attrs:{\"variant\":\"secondary\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  #upload\n    b-container\n      h3 上傳檔案\n      b-form(@submit=\"submit\")\n        b-form-file(\n          multiple\n          v-model=\"files\"\n          :state=\"state\"\n          placeholder=\"瀏覽檔案或是拖曳至此\"\n          drop-placeholder=\"將檔案拖曳至此\"\n          browse-text=\"瀏覽\"\n          accept=\"image/*\"\n          @input=\"validateFile\"\n        )\n        p 一張上限4MB\n        p 本次最多能上傳5張\n        p PNG、JPEG、JPG、GIF、BMP\n        b-button(size=\"lg\" type=\"submit\") 上傳\n        br\n        b-spinner.text-center(variant=\"secondary\" :style=\"spinnerstyle\")\n</template>\n\n<script>\nexport default {\n  name: 'upload',\n  data () {\n    return {\n      files: [],\n      state: true,\n      images: [],\n      banned: false,\n      spinnerstyle: {\n        display: 'none'\n      }\n    }\n  },\n  computed: {\n    user () {\n      return this.$store.getters.user\n    },\n    imagesL () {\n      const localstorage = JSON.parse(localStorage.getItem('vuex'))\n      return localstorage.successUp\n    }\n  },\n  methods: {\n    validateFile () {\n      for (let file of this.files) {\n        if (file != null) {\n          if (file.size >= 2000 * 2000 || !file.type.includes('image')) {\n            this.state = false\n            file = null\n          } else {\n            this.state = true\n          }\n        } else {\n          this.state = false\n        }\n      }\n    },\n    submit (event) {\n      event.preventDefault()\n      if (this.files.length === 0) {\n        this.$swal({\n          title: '沒有檔案',\n          text: '請選擇單個或多個檔案',\n          icon: 'warning',\n          confirmButtonText: '知道了'\n        })\n      } else if (this.files.length > 5) {\n        this.$swal({\n          title: '檔案過多',\n          text: '本次最多能上傳5張',\n          icon: 'warning',\n          confirmButtonText: '知道了'\n        })\n      } else {\n        for (const file of this.files) {\n          if (file === null || file.size >= 2000 * 2000 || !file.type.includes('image')) {\n            this.$swal({\n              title: '上傳失敗',\n              text: '檔案格式不符',\n              icon: 'error',\n              confirmButtonText: '知道了'\n            })\n            return\n          }\n        }\n        this.spinnerstyle.display = 'block'\n        const fd = new FormData()\n        for (const i of this.files) {\n          fd.append('image', i)\n          fd.append('title', '無題')\n          fd.append('description', '沒有任何圖片敘述')\n          fd.append('album', null)\n          fd.append('privacy', '公開')\n        }\n        this.axios.post(process.env.VUE_APP_APIURL + '/file', fd, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        })\n          .then(response => {\n            for (let i = 0; i < response.data.name.length; i++) {\n              this.images.push(\n                {\n                  src: process.env.VUE_APP_APIURL + '/file/' + response.data.name[i].name,\n                  _id: response.data.name[i]._id\n                }\n              )\n            }\n            this.$store.commit('successUp', this.images)\n            this.$router.push('/uploadSC')\n          })\n          .catch(error => {\n            this.$swal({\n              title: '發生錯誤',\n              text: error.response.data.message,\n              icon: 'error',\n              confirmButtonText: '知道了'\n            })\n          })\n      }\n    }\n  },\n  mounted () {\n    this.axios.get(process.env.VUE_APP_APIURL + '/users/' + this.user)\n      .then(response => {\n        const result = response.data.result[0]\n        this.banned = result.banned\n      })\n      .catch((error) => {\n        console.log(error)\n        this.$swal({\n          title: '發生錯誤',\n          icon: 'error',\n          confirmButtonText: '知道了'\n        })\n      })\n    setTimeout(() => {\n      if (this.banned === true) {\n        this.$swal({\n          title: '您的帳號已被停權，請洽客服',\n          icon: 'error',\n          confirmButtonText: '知道了'\n        })\n        this.$router.push('/')\n      }\n    }, 500)\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Upload.vue?vue&type=template&id=79f950f6&lang=pug&\"\nimport script from \"./Upload.vue?vue&type=script&lang=js&\"\nexport * from \"./Upload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (e) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (f) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n"],"sourceRoot":""}
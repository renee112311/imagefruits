(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["upload"],{2532:function(t,e,n){"use strict";var i=n("23e7"),a=n("5a34"),s=n("1d80"),r=n("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(s(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},2679:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"upload"}},[n("b-container",[n("h3",[t._v("上傳檔案")]),n("b-form",{on:{submit:t.submit}},[n("b-form-file",{attrs:{multiple:"",state:t.state,placeholder:"瀏覽檔案或是拖曳至此","drop-placeholder":"將檔案拖曳至此","browse-text":"瀏覽",accept:"image/*"},on:{input:t.validateFile},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}}),n("p",[t._v("一張上限4MB")]),n("p",[t._v("本次最多能上傳12張")]),n("p",[t._v("PNG、JPEG、JPG、GIF、BMP")]),n("b-button",{attrs:{size:"lg",type:"submit"}},[t._v("上傳")])],1)],1)],1)},a=[],s=(n("caad"),n("b0c0"),n("2532"),n("b85c")),r={name:"upload",data:function(){return{files:[],state:!0,images:[],banned:!1}},computed:{user:function(){return this.$store.getters.user}},methods:{validateFile:function(){var t,e=Object(s["a"])(this.files);try{for(e.s();!(t=e.n()).done;){var n=t.value;null!=n?n.size>=4e6||!n.type.includes("image")?(this.state=!1,n=null):this.state=!0:this.state=!1}}catch(i){e.e(i)}finally{e.f()}},submit:function(t){var e=this;if(t.preventDefault(),0===this.files.length)this.state=!1,this.$swal({title:"沒有檔案",text:"請選擇單個或多個檔案",icon:"warning",confirmButtonText:"知道了"});else{var n,i=Object(s["a"])(this.files);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(null===a||a.size>=4e6||!a.type.includes("image"))this.$swal({title:"上傳失敗",text:"檔案格式不符",icon:"error",confirmButtonText:"知道了"});else{var r=new FormData;r.append("image",a),r.append("title","無題"),r.append("description","沒有任何圖片敘述"),r.append("album",null),r.append("privacy","公開"),this.axios.post("https://imagefruits.herokuapp.com/file",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.images.push({src:"https://imagefruits.herokuapp.com/file/"+t.data.name,_id:t.data._id}),e.state=!0})).catch((function(t){e.state=!1,e.$swal({title:"發生錯誤",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})}))}}}catch(o){i.e(o)}finally{i.f()}}this.state&&setTimeout((function(){e.$store.commit("successUp",e.images),e.$router.push("/uploadSC")}),500)}},mounted:function(){var t=this;this.axios.get("https://imagefruits.herokuapp.com/users/"+this.user).then((function(e){var n=e.data.result[0];t.banned=n.banned})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),setTimeout((function(){!0===t.banned&&(t.$swal({title:"您的帳號已被停權，請洽客服",icon:"error",confirmButtonText:"知道了"}),t.$router.push("/"))}),100)}},o=r,u=n("2877"),c=Object(u["a"])(o,i,a,!1,null,null,null);e["default"]=c.exports},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},ab13:function(t,e,n){var i=n("b622"),a=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(i){}}return!1}},caad:function(t,e,n){"use strict";var i=n("23e7"),a=n("4d64").includes,s=n("44d2"),r=n("ae40"),o=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!o},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")}}]);
//# sourceMappingURL=upload.9483e2af.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["back"],{2532:function(t,e,i){"use strict";var s=i("23e7"),a=i("5a34"),r=i("1d80"),n=i("ab13");s({target:"String",proto:!0,forced:!n("includes")},{includes:function(t){return!!~String(r(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,e,i){var s=i("44e7");t.exports=function(t){if(s(t))throw TypeError("The method doesn't accept regular expressions");return t}},ab13:function(t,e,i){var s=i("b622"),a=s("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[a]=!1,"/./"[t](e)}catch(s){}}return!1}},caad:function(t,e,i){"use strict";var s=i("23e7"),a=i("4d64").includes,r=i("44d2"),n=i("ae40"),o=n("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!o},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")},d8ee:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"back"}},[i("b-container",[i("h3",[t._v("管理員後台")]),i("b-card",{attrs:{"no-body":""}},[i("b-tabs",{attrs:{pills:"",card:"",vertical:""}},[i("b-tab",{attrs:{title:"會員管理",active:""}},[i("h4",[t._v("會員管理")]),i("b-row",{staticClass:"searchrow"},[i("b-col",{attrs:{col:"",cols:"12",xl:"4"}},[i("b-form-select",{staticClass:"form-control",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[i("option",[t._v("會員帳號")]),i("option",[t._v("會員ID編號")])])],1),i("b-col",{attrs:{col:"",cols:"12",xl:"8"}},[i("b-nav-form",[i("b-form-input",{attrs:{type:"text",size:"sm",placeholder:"輸入關鍵字即可搜尋"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1)],1)],1),i("b-table-simple",{attrs:{striped:"",hover:"",responsive:"sm"}},[i("b-thead",[i("b-tr",[i("b-th",[t._v("編號")]),i("b-th",[t._v("會員帳號")]),i("b-th",[t._v("動作")])],1)],1),i("b-tbody",[0===t.searchuser.length?i("b-tr",[i("td",[t._v("沒有資料")])]):t._l(t.searchuser,(function(e,s){return i("b-tr",{key:"key"+s},[i("b-td",[i("span",[t._v(t._s(e._id))])]),i("b-td",[i("span",[t._v(t._s(e.account))])]),i("b-td",[e.banned?i("b-btn",{on:{click:function(e){t.banUser(s)}}},[t._v("恢復")]):t._e(),e.banned||"admin"===e.account?t._e():i("b-btn",{attrs:{variant:"danger"},on:{click:function(e){t.banUser(s)}}},[t._v("停權")])],1)],1)}))],2)],1)],1),i("b-tab",{attrs:{title:"檔案管理"}},[i("h4",[t._v("檔案管理")]),i("b-row",{staticClass:"searchrow"},[i("b-col",{attrs:{col:"",cols:"12",lg:"3"}},[i("b-form-select",{staticClass:"form-control",model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},[i("option",[t._v("會員帳號")]),i("option",[t._v("檔案ID編號")])])],1),i("b-col",{attrs:{col:"",cols:"12",lg:"9"}},[i("b-nav-form",[i("b-form-input",{attrs:{type:"text",size:"sm",placeholder:"輸入關鍵字即可搜尋"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1)],1)],1),i("b-table-simple",{attrs:{striped:"",hover:"",responsive:"sm"}},[i("b-thead",[i("b-tr",[i("b-th",[t._v("編號")]),i("b-th",[t._v("會員帳號")]),i("b-th",[t._v("檔名")]),i("b-th",[t._v("內容")]),i("b-th",[t._v("動作")])],1)],1),i("b-tbody",[0===t.searchimg.length?i("b-tr",[i("td",{attrs:{colspan:"2"}},[t._v("沒有資料")])]):t._l(t.searchimg,(function(e,s){return i("b-tr",{key:"key"+s},[i("b-td",[i("span",[t._v(t._s(e._id))])]),i("b-td",[i("span",[t._v(t._s(e.user))])]),i("b-td",[i("span",[t._v(t._s(e.name))])]),i("b-td",[i("span",[t._v(t._s(e.src))])]),i("b-td",[i("b-btn",{attrs:{variant:"danger"},on:{click:function(e){return t.deleteImg(s)}}},[t._v("刪除")])],1)],1)}))],2)],1)],1),i("b-tab",{attrs:{title:"其他"}},[i("h4",[t._v("輪播圖")]),i("b-form",{on:{submit:t.newCarou1}},[i("b-form-file",{attrs:{state:t.filestate,placeholder:"瀏覽檔案或是拖曳至此","drop-placeholder":"將檔案拖曳至此",required:"","browse-text":"瀏覽",accept:"image/*"},on:{input:t.validateFile},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),i("p",[t._v("上限16MB")]),i("p",[t._v("PNG、JPEG、JPG、GIF、BMP")]),i("b-button",{attrs:{type:"newCarou1"}},[t._v("更換第一張")])],1),i("b-form",{on:{submit:t.newCarou2}},[i("b-form-file",{attrs:{state:t.filestate,placeholder:"瀏覽檔案或是拖曳至此","drop-placeholder":"將檔案拖曳至此",required:"","browse-text":"瀏覽",accept:"image/*"},on:{input:t.validateFile},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),i("p",[t._v("上限16MB")]),i("p",[t._v("PNG、JPEG、JPG、GIF、BMP")]),i("b-button",{attrs:{type:"newCarou2"}},[t._v("更換第二張")])],1),i("b-form",{on:{submit:t.newCarou3}},[i("b-form-file",{attrs:{state:t.filestate,placeholder:"瀏覽檔案或是拖曳至此","drop-placeholder":"將檔案拖曳至此",required:"","browse-text":"瀏覽",accept:"image/*"},on:{input:t.validateFile},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),i("p",[t._v("上限16MB")]),i("p",[t._v("PNG、JPEG、JPG、GIF、BMP")]),i("b-button",{attrs:{type:"newCarou3"}},[t._v("更換第三張")])],1),i("b-form",{on:{submit:t.newCarou4}},[i("b-form-file",{attrs:{state:t.filestate,placeholder:"瀏覽檔案或是拖曳至此","drop-placeholder":"將檔案拖曳至此",required:"","browse-text":"瀏覽",accept:"image/*"},on:{input:t.validateFile},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),i("p",[t._v("上限16MB")]),i("p",[t._v("PNG、JPEG、JPG、GIF、BMP")]),i("b-button",{attrs:{type:"newCarou4"}},[t._v("更換第四張")])],1),i("b-form",{on:{submit:t.NN}},[i("b-form-file",{attrs:{state:t.filestate,placeholder:"瀏覽檔案或是拖曳至此","drop-placeholder":"將檔案拖曳至此",required:"","browse-text":"瀏覽",accept:"image/*"},on:{input:t.validateFile},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),i("b-btn",{attrs:{type:"NN"}},[t._v("上傳")])],1)],1)],1)],1)],1)],1)},a=[],r=(i("4de4"),i("7db0"),i("caad"),i("d81d"),i("a434"),i("b0c0"),i("4d63"),i("ac1f"),i("25f0"),i("2532"),{data:function(){return{allUsers:[],images:[],keywords:"",searchType:"會員帳號",file:null,filestate:null,carouselimg:[]}},methods:{banUser:function(t){var e=this,i=-1,s=this.searchuser[t]._id;this.allUsers.find((function(t,e){t._id===s&&(i=e)})),this.allUsers[i].banned?this.axios.patch("https://imagefruits.herokuapp.com/users/banned/"+this.allUsers[i]._id,{banned:!1}).then((function(t){e.allUsers[i].banned=!1})).catch((function(t){e.$swal({title:"發生錯誤",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})})):this.axios.patch("https://imagefruits.herokuapp.com/users/banned/"+this.allUsers[i]._id,{banned:!0}).then((function(t){e.allUsers[i].banned=!0})).catch((function(t){e.$swal({title:"發生錯誤",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})}))},deleteImg:function(t){var e=this,i=-1,s=this.searchimg[t]._id;this.images.find((function(t,e){t._id===s&&(i=e)})),this.axios.delete("https://imagefruits.herokuapp.com/file/"+this.images[i]._id).then((function(t){e.images.splice(i,1)})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},newCarou1:function(t){var e=this;t.preventDefault(),null===this.file||this.file.size>=16e6||!this.file.type.includes("image")?this.$swal({title:"發生錯誤",text:"檔案格式不符",icon:"error",confirmButtonText:"知道了"}):this.axios.delete("https://imagefruits.herokuapp.com/carousel/"+this.carouselimg[0]._id).then((function(t){var i=new FormData;i.append("image",e.file),e.axios.post("https://imagefruits.herokuapp.com/carousel",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$swal({title:"上傳成功",icon:"success",confirmButtonText:"知道了"}),location.reload()})).catch((function(t){e.filestate=!1,e.$swal({title:"發生錯誤",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})}))})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},newCarou2:function(t){var e=this;t.preventDefault(),null===this.file||this.file.size>=16e6||!this.file.type.includes("image")?this.$swal({title:"發生錯誤",text:"檔案格式不符",icon:"error",confirmButtonText:"知道了"}):this.axios.delete("https://imagefruits.herokuapp.com/carousel/"+this.carouselimg[1]._id).then((function(t){var i=new FormData;i.append("image",e.file),e.axios.post("https://imagefruits.herokuapp.com/carousel",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$swal({title:"上傳成功",icon:"success",confirmButtonText:"知道了"}),location.reload()})).catch((function(t){e.filestate=!1,e.$swal({title:"發生錯誤",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})}))})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},newCarou3:function(t){var e=this;t.preventDefault(),null===this.file||this.file.size>=16e6||!this.file.type.includes("image")?this.$swal({title:"發生錯誤",text:"檔案格式不符",icon:"error",confirmButtonText:"知道了"}):this.axios.delete("https://imagefruits.herokuapp.com/carousel/"+this.carouselimg[2]._id).then((function(t){var i=new FormData;i.append("image",e.file),e.axios.post("https://imagefruits.herokuapp.com/carousel",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$swal({title:"上傳成功",icon:"success",confirmButtonText:"知道了"}),location.reload()})).catch((function(t){e.filestate=!1,e.$swal({title:"發生錯誤",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})}))})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},newCarou4:function(t){var e=this;t.preventDefault(),null===this.file||this.file.size>=16e6||!this.file.type.includes("image")?this.$swal({title:"發生錯誤",text:"檔案格式不符",icon:"error",confirmButtonText:"知道了"}):this.axios.delete("https://imagefruits.herokuapp.com/carousel/"+this.carouselimg[3]._id).then((function(t){var i=new FormData;i.append("image",e.file),e.axios.post("https://imagefruits.herokuapp.com/carousel",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$swal({title:"上傳成功",icon:"success",confirmButtonText:"知道了"}),location.reload()})).catch((function(t){e.filestate=!1,e.$swal({title:"發生錯誤",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})}))})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},NN:function(t){var e=this;if(t.preventDefault(),null===this.file||this.file.size>=16e6||!this.file.type.includes("image"))this.$swal({title:"發生錯誤",text:"檔案格式不符",icon:"error",confirmButtonText:"知道了"});else{var i=new FormData;i.append("image",this.file),this.axios.post("https://imagefruits.herokuapp.com/carousel",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$swal({title:"上傳成功",icon:"success",confirmButtonText:"知道了"}),location.reload()})).catch((function(t){e.filestate=!1,e.$swal({title:"發生錯誤",text:t.response.data.message,icon:"error",confirmButtonText:"知道了"})}))}},validateFile:function(){null!=this.file&&(this.file.size>=16e6||!this.file.type.includes("image")?(this.filestate=!1,this.file=null):this.filestate=!0)}},computed:{user:function(){return this.$store.getters.user},searchuser:function(){if(""!==this.keywords){var t=new RegExp(this.keywords);return"會員ID編號"===this.searchType?this.allUsers.filter((function(e){return t.test(e._id)})):"會員帳號"===this.searchType?this.allUsers.filter((function(e){return t.test(e.account)})):this.allUsers}return this.allUsers},searchimg:function(){if(""!==this.keywords){var t=new RegExp(this.keywords);return"檔案ID編號"===this.searchType?this.images.filter((function(e){return t.test(e._id)})):"會員帳號"===this.searchType?this.images.filter((function(e){return t.test(e.user)})):this.images}return this.images}},mounted:function(){var t=this;this.axios.get("https://imagefruits.herokuapp.com/back/users/").then((function(e){t.allUsers=e.data.result.map((function(t){return{_id:t._id,account:t.account,banned:t.banned}}))})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),this.axios.get("https://imagefruits.herokuapp.com/back/files/").then((function(e){t.images=e.data.result.map((function(t){return{_id:t._id,user:t.user,name:t.name,src:"https://imagefruits.herokuapp.com/file/"+t.name}}))})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})})),this.axios.get("https://imagefruits.herokuapp.com/carousel/img").then((function(e){var i=e.data.result;t.carouselimg=i.map((function(t){return{src:"https://imagefruits.herokuapp.com/file/"+t.name,_id:t._id}}))})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))}}),n=r,o=i("2877"),c=Object(o["a"])(n,s,a,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=back.a7821e29.js.map
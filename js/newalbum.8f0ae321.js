(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["newalbum"],{"0282":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"newalbum"}},[s("b-container",[s("h3",[t._v("新增相簿")]),s("p",[t._v("尚未被列入相簿的圖片：")]),s("b-btn",{on:{click:t.selectCancel}},[t._v("取消選取")]),0===t.images.length?s("p",[t._v("沒有任何圖片，快去上傳吧")]):s("b-row",t._l(t.images,(function(e,n){return s("b-col",{key:n,attrs:{col:"",cols:"12",lg:"2"}},[s("b-card",{on:{click:function(e){return t.multiselect(n)}}},[e.checked?s("img",{staticClass:"berry",attrs:{src:i("2e63")}}):t._e(),s("b-card-img",{attrs:{src:e.src}})],1)],1)})),1),s("b-form",{on:{submit:t.createAlbum}},[s("b-form-input",{attrs:{placeholder:"相簿標題",state:t.titlestate},on:{input:t.validateText},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),s("b-form-textarea",{attrs:{placeholder:"相簿說明",rows:"3","max-rows":"6",maxlength:"200",state:t.descstate},on:{input:t.validateText},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}},[s("br")]),s("b-button",{attrs:{type:"createAlbum"}},[t._v("新增相簿")])],1)],1)],1)},n=[],a=(i("a4d3"),i("e01a"),i("4de4"),i("c975"),i("d81d"),i("a434"),i("b0c0"),i("b85c")),c={data:function(){return{title:"",description:"",index:"0",images:[],options:[],titlestate:null,descstate:null}},methods:{validateText:function(){this.title.length>20?this.titlestate=!1:this.titlestate=!0,this.description.length>150?this.descstate=!1:this.descstate=!0},selectCancel:function(){this.options.length=0;var t,e=Object(a["a"])(this.images);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.checked=!1}}catch(s){e.e(s)}finally{e.f()}},createAlbum:function(t){var e=this;t.preventDefault(),this.title.length>20?this.$swal({title:"新增失敗",text:"相簿標題格式不符",icon:"error",confirmButtonText:"知道了"}):this.description.length>150&&this.$swal({title:"新增失敗",text:"相簿說明格式不符",icon:"error",confirmButtonText:"知道了"});var i,s=Object(a["a"])(this.options);try{for(s.s();!(i=s.n()).done;){var n=i.value;this.axios.patch("https://imagefruits.herokuapp.com/file/"+n._id,{album:this.title}).then((function(t){})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))}}catch(c){s.e(c)}finally{s.f()}this.axios.post("https://imagefruits.herokuapp.com/albums",{user:this.user,title:this.title,description:this.description}).then((function(t){var i=t.data;i.success?e.$router.push("/myimages"):e.$swal({title:"發生錯誤",text:i.message,icon:"error",confirmButtonText:"知道了"})})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},multiselect:function(t){this.images[t].checked?(this.options.splice(this.options.indexOf(this.images[t]),1),this.images[t].checked=!1):(this.options.push(this.images[t]),this.images[t].checked=!0)}},computed:{user:function(){return this.$store.getters.user}},mounted:function(){var t=this;this.axios.get("https://imagefruits.herokuapp.com/author/"+this.user).then((function(e){var i=e.data.result.filter((function(t){return"null"===t.album}));t.images=i.map((function(t){return{title:t.title,desc:t.description,src:"https://imagefruits.herokuapp.com/file/"+t.name,_id:t._id,album:t.album,checked:!1}}))})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))}},o=c,r=i("2877"),l=Object(r["a"])(o,s,n,!1,null,null,null);e["default"]=l.exports},"2e63":function(t,e,i){t.exports=i.p+"img/berry.0a1c3572.png"}}]);
//# sourceMappingURL=newalbum.8f0ae321.js.map
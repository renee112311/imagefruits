(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["uploadSC"],{e459:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"uploadSC"}},[r("b-container",[r("b-btn",{on:{click:t.tomyimages}},[t._v("您的檔案已經上傳成功，點擊此處前往「我的圖片」")]),r("p",[t._v("或是在下方直接編輯")]),r("b-row",t._l(t.images,(function(e,i){return r("b-col",{key:i,attrs:{cols:"12"}},[r("b-card",[r("b-row",{staticClass:"inner"},[r("b-col",{staticClass:"w-100",staticStyle:{"text-align":"center"}},[r("b-card-img",{attrs:{src:e.src}})],1),r("div",{staticClass:"w-100",staticStyle:{height:"1px"}}),r("b-col",[r("b-card-body",[r("table",[r("tr",[r("td",[e.edit?r("b-form-select",{attrs:{options:t.privacyOp},model:{value:e.privacy,callback:function(r){t.$set(e,"privacy",r)},expression:"image.privacy"}}):r("span",{staticStyle:{color:"#888"},on:{click:function(e){return t.edit(i)}}},[t._v("("+t._s(e.privacy)+")")])],1),r("td")]),r("tr",[r("td",[e.edit?r("b-form-input",{on:{blur:function(e){return t.update(i)}},model:{value:e.title,callback:function(r){t.$set(e,"title",r)},expression:"image.title"}}):r("span",{staticStyle:{"font-size":"30px"},attrs:{id:"imgtitle"},on:{click:function(e){return t.edit(i)}}},[t._v(t._s(e.title))])],1),r("td")]),r("tr",[r("td",[e.edit?r("b-form-textarea",{on:{blur:function(e){return t.update(i)}},model:{value:e.description,callback:function(r){t.$set(e,"description",r)},expression:"image.description"}}):r("span",{attrs:{id:"imgdesc"},on:{click:function(e){return t.edit(i)}}},[t._v(t._s(e.description))])],1),r("td")]),r("tr",[r("td",[e.edit?t._e():r("b-btn",{attrs:{variant:"light"},on:{click:function(e){return t.edit(i)}}},[r("font-awesome-icon",{attrs:{icon:["far","edit"]}})],1)],1),r("td",[r("b-btn",{attrs:{variant:"light"},on:{click:function(e){return t.del(i)}}},[r("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)],1)])])])],1),r("b-col",[r("b-card-footer",[r("table",[r("tr",[r("td",[r("span",[t._v("圖片連結")])]),r("td")]),r("tr",[r("td",[r("span",[t._v(t._s(e.src))])]),r("td",[r("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.src,expression:"image.src",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{type:"button"}},[t._v("複製")])],1)]),r("tr",[r("td",[r("span",[t._v("HTML")])]),r("td")]),r("tr",[r("td",[r("span",[t._v('<img src="'+t._s(e.src)+'">')])]),r("td",[r("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:"<img src="+e.src+">",expression:"'<img src='+image.src+'>'",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{type:"button"}},[t._v("複製")])],1)]),r("tr",[r("td",[r("span",[t._v("Markdown")])]),r("td")]),r("tr",[r("td",[r("span",[t._v("![]("+t._s(e.src)+")")])]),r("td",[r("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:"![]("+e.src+")",expression:"'![]('+image.src+')'",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{type:"button"}},[t._v("複製")])],1)])])])],1)],1)],1)],1)})),1)],1)],1)},a=[],o=(r("a4d3"),r("e01a"),r("7db0"),r("d81d"),r("a434"),r("b0c0"),r("b85c")),s={data:function(){return{allimages:[],images:[],privacyOp:["公開","私人"]}},methods:{clearStorage:function(){var t=JSON.parse(localStorage.getItem("vuex"));this.images.length=0,t.successUp.length=0,localStorage.setItem("vuex",JSON.stringify(t))},validateText:function(){this.description.length>150?this.textstate=!1:this.textstate=!0},edit:function(t){this.images[t].edit=!0},update:function(t){var e=this;this.axios.patch("https://imagefruits.herokuapp.com//file/"+this.images[t]._id,{title:this.images[t].title,description:this.images[t].description,privacy:this.images[t].privacy}).then((function(r){e.images[t].edit=!1})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},del:function(t){var e=this;this.axios.delete("https://imagefruits.herokuapp.com//file/"+this.images[t]._id).then((function(r){e.images.splice(t,1)})).catch((function(){e.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},onCopy:function(t){this.$swal({title:"已複製到剪貼簿",icon:"success",confirmButtonText:"知道了"})},onError:function(t){this.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})},tomyimages:function(){this.$router.push("/myimages")}},computed:{imagesL:function(){var t=JSON.parse(localStorage.getItem("vuex"));return t.successUp[0]},user:function(){return this.$store.getters.user}},mounted:function(){var t=this;this.axios.get("https://imagefruits.herokuapp.com//author/"+this.user).then((function(e){t.allimages=e.data.result.map((function(t){return{title:t.title,description:t.description,privacy:t.privacy,src:"https://imagefruits.herokuapp.com//file/"+t.name,_id:t._id,edit:!1,album:t.album}}));var r,i=Object(o["a"])(t.imagesL);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=-1;t.allimages.find((function(t,e){t._id===a._id&&(s=e)})),t.images.push(t.allimages[s])}}catch(n){i.e(n)}finally{i.f()}})).catch((function(e){console.log(e),t.$swal({title:"發生錯誤",icon:"error",confirmButtonText:"知道了"})}))},beforeRouteLeave:function(t,e,r){this.clearStorage(),this.$store.commit("successClean"),r()}},n=s,c=r("2877"),l=Object(c["a"])(n,i,a,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=uploadSC.f2acf9cb.js.map